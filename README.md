# アプリケーション名
 
TimeCard Manegement
 
# アプリケーション概要
 
"TimeCard Manegement"は勤怠記録を元に労働時間を分析する機能を持ったアプリケーションです。
 
# 利用方法
 
```
$ python time_card.py
```
 
# 目指した課題解決
 
ペルソナ
* 会社へ出退社しなければタイムカードで打刻できない会社へ勤めている営業の人
* タイムカードによる勤怠管理をしている会社の残業時間が多く、残業時間を減らしたいと考えている人
* 労働時間を自己申告している会社に勤めていて、毎月労働時間申請を手動で行う手間や時間がかかる人

ユーザーストーリー
* 打刻をWebシステム化することで端末があればどこからでも打刻可能となり出退勤に費やしていた時間を自由に使えるようになります。
* 当月の労働時間と残業時間、月毎の詳細などを数値化することで働き方改善の指標となります。
* 打刻した情報をでCSVファイルへ出力することができれば、手間がかからず空いた時間を自由に使えるようになります。
 
# 洗い出した要件
 
| 優先順位 （高：3、中：2、低：1） | 機能                     | 目的                                                                     | 詳細                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ストーリー(ユースケース)                                                                          | 見積もり（所要時間） |
|----------------------------------|--------------------------|--------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|----------------------|
| 3                                | DB設計                   | アプリ全体を把握してテーブルを洗い出すため                               | 必要テーブル syukin/taikin/zangyo データ集計し易くするため打刻動作毎に保存テーブルを分割させる 各テーブル内、打刻データはdatatimeモジュールを使って取得したデータを登録させる データ分析用に個別カラムにデータを保存させる  syukin/taikinテーブル zangyoテーブルへ集計データを登録するため打刻日付はdate型、打刻時刻はdatetime型にて登録させる 他分析用の個別項目は全てint型にて登録させる  zangyoテーブル 日付はdata型にて登録させる 他分析用の個別項目は全てint型にて登録させる |                                                                                                   | 12                   |
| 3                                | アプリ設計               | アプリ全体で必要な機能の洗い出しとモジュールの選定するため               | 必要なモジュールは各機能実装時の最初にインストールする                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                   | 12                   |
| 3                                | 現時刻表示               | タイムカードシステムとしての必要最低機能のため                           | トップページ上部へjavascriptを用いてリアルタイム表示させる                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                   | 4                    |
| 3                                | 打刻機能                 | システム上で出退勤の打刻を完了させるため                                 | トップページ上部に出勤・退勤それぞれボタン化して表示させる                                                                                                                                                                                                                                                                                                                                                                                                                        | ボタンを押すと打刻完了画面へ遷移し各々のテーブルにデータが登録される                              | 4                    |
| 3                                | 出退勤リスト表示機能     | 現在を含めて直近の働き方を視覚的に把握させるため                         | トップページ中央に直近の出退勤の情報をリスト化して表示させる                                                                                                                                                                                                                                                                                                                                                                                                                      | 出退勤打刻と連動して最新の内容が表示される                                                        | 4                    |
| 3                                | 累計時間表示機能         | 現在を含めて月間の労働時間と残業時間を視覚的に把握させるため             | トップページ中央に月間の労働時間と残業時間を集計した結果を数値化して表示させる                                                                                                                                                                                                                                                                                                                                                                                                    | 出退勤打刻と連動して最新の内容が表示される                                                        | 4                    |
| 3                                | 分析機能                 | 現在を含めて労働状況をさらに細かく視覚化して働き方改善の指標にさせるため | トップページ下部に分析結果ページ遷移のボタンを表示させる 分析結果ページにて当月を含めた直近6ヶ月分のテーブルデータをpandasモジュールで集計して総出勤日・総労働時間・平均労働時間・総残業時間・平均残業時間・残業比率」を数値化して月別リストで表示させる                                                                                                                                                                                                                          | 分析ボタンを押すと分析結果ページへ遷移される 分析結果は出退勤打刻と連動して最新の内容が表示される | 14                   |
| 3                                | グラフ化機能             | 分析結果をより見やすく活用させるため                                     | 分析結果ページ下部にグラフ化ボタンを表示させる 分析結果をmatplotlibモジュールを使ってグラフ化したものをpng形式でファイル保存させる                                                                                                                                                                                                                                                                                                                                                | グラフ化ボタンを押すとグラフ化完了画面へ遷移してアプリ直下ディレクトリに「graph.png」に保存される | 14                   |
| 3                                | CSV出力機能              | 毎月手動で行う出退勤申請の集計をシステムで簡略化させるため               | トップページ下部にCSV出力ボタンを表示させる pandasモジュールで集計した当月の出退勤データをCSVへ出力させる                                                                                                                                                                                                                                                                                                                                                                         | CSV出力ボタンを押すとCSV出力完了画面へ遷移してアプリ直下ディレクトリに「data.csv」に保存される    | 4                    |
| 2                                | トップページ自動遷移機能 | 操作性を向上させるため                                                   | 各機能の結果画面へ遷移後にhtmlのmeta要素を使ってトップページへ自動遷移させる                                                                                                                                                                                                                                                                                                                                                                                                      | 完了画面から10秒経過でトップページへ自動遷移される                                                | 4                    |
| 1                                | 各種ボタンの強調         | 誤操作を防ぐために見易く強調させる                                       | 各画面のボタンをCSSにて装飾させる                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                   | 4                    |
# 環境
インストールしたライブラリ一覧

* python 3.8.5
* Flask  2.0.0
* Jinja2 3.0.1
* matplotlib  3.4.2
* pandas  1.2.4
* mysql-connector-python  8.0.25
 
# インストール方法
 
各ライブラリインストール方法
 
```bash
pip install flask
```
 
```bash
pip install Jinja2
```
 
```bash
pip install matplotlib
```
 
```bash
pip install pandas
```
 
```bash
pip install mysql-connector-python
```
 
# デモ
 
トップページ構成
[![Image from Gyazo](https://i.gyazo.com/d4db9ffaf8b84441b74d4f1fe24b2518.png)](https://gyazo.com/d4db9ffaf8b84441b74d4f1fe24b2518)
 
分析結果ページ構成
[![Image from Gyazo](https://i.gyazo.com/8e2f1c943fe070b95a5406d3a381a58f.png)](https://gyazo.com/8e2f1c943fe070b95a5406d3a381a58f)
 
出退勤打刻機能
出勤・退勤ボタンを押すと打刻完了ページへ遷移しますが10秒後に自動でトップページへ戻ってきます。
[![Image from Gyazo](https://i.gyazo.com/1de8168f3e2bdb499c0d8f258d78b4fb.gif)](https://gyazo.com/1de8168f3e2bdb499c0d8f258d78b4fb)

出退勤リスト・月間総労働時間・月間総残業時間連動機能
出退勤打刻時間と連動して表示される内容が自動更新されます。
[![Image from Gyazo](https://i.gyazo.com/cc83758a28d240c27cc3000aca39d2ad.gif)](https://gyazo.com/cc83758a28d240c27cc3000aca39d2ad)
 
CSVファイル出力機能
当月分の出退勤データをCSVファイルに出力できます。
[![Image from Gyazo](https://i.gyazo.com/e5cb633c0f128dcbd7cef3b196402cbf.gif)](https://gyazo.com/e5cb633c0f128dcbd7cef3b196402cbf)

データ分析機能
打刻データから分析して直近6ヶ月分の労働データを数値化して表示できます。
[![Image from Gyazo](https://i.gyazo.com/bc0c422a00736acac5734938aba55327.gif)](https://gyazo.com/bc0c422a00736acac5734938aba55327)

分析結果をグラフ化して保存することができます。
[![Image from Gyazo](https://i.gyazo.com/e957594d4097c849cb353ce973b8eecd.gif)](https://gyazo.com/e957594d4097c849cb353ce973b8eecd)

# 実装予定機能
 
* ユーザー管理機能
* 分析項目及びグラフ種類の増加
* 本部管理機能の実装

# データベース設計
 time_card.pngを御確認下さい

# 著者
 
* 作成者 大杉 圭
* 所  属 テックキャンプ92期
* E-mail on92.oosugi.kei@gmail.com